<%@ page language="java" contentType="application/x-csv; charset=ISO-8859-1"%><%@ taglib uri="/WEB-INF/c.tld" prefix="c" %><%@ taglib uri="/WEB-INF/fmt.tld" prefix="fmt" %><%@ taglib uri="/WEB-INF/fn.tld" prefix="fn" %><c:set var="filename" scope="page"><fmt:message key="daylyReceiptsIFrame.jsp.file.backup"/>_<c:set var="filterList" value="${param.filterList}"/><c:out value="${fn:replace(filterList, '/', '-')}" /></c:set><jsp:scriptlet>String filename = (String)pageContext.getAttribute("filename");response.setHeader("Content-Disposition", "attachment; filename="+filename+".csv");</jsp:scriptlet><fmt:message key="daylyReceiptsIFrame.jsp.label.cashing.id"/>;<fmt:message key="daylyReceiptsIFrame.jsp.label.table"/>;<fmt:message key="daylyReceiptsIFrame.jsp.label.cash"/>;<fmt:message key="daylyReceiptsIFrame.jsp.label.ticket"/>;<fmt:message key="daylyReceiptsIFrame.jsp.label.cheque"/>;<fmt:message key="daylyReceiptsIFrame.jsp.label.card"/>;<fmt:message key="daylyReceiptsIFrame.jsp.label.unpaid"/>;<fmt:message key="daylyReceiptsIFrame.jsp.label.amount"/>;<c:set var="numberTables" value="0"/><c:set var="sumCashes" value="0"/><c:set var="sumTickets" value="0"/><c:set var="sumCheques" value="0"/><c:set var="sumCards" value="0"/><c:set var="sumUnpaid" value="0"/><c:set var="sumAmounts" value="0"/><c:if test="${not empty cashingList}"><c:forEach var="cashing" items="${cashingList}" varStatus="status"><c:if test="${status.last}"><c:set var="numberTables" value="${status.index+1}"/></c:if><c:set var="sumCashes" value="${sumCashes+cashing.cash}"/><c:set var="sumTickets" value="${sumTickets+cashing.ticket}"/><c:set var="sumCheques" value="${sumCheques+cashing.cheque}"/><c:set var="sumCards" value="${sumCards+cashing.card}"/><c:set var="sumUnpaid" value="${sumUnpaid+cashing.unpaid}"/><c:set var="sumAmounts" value="${sumAmounts+cashing.dinnerTable.amountPay}"/>
<c:out value="${cashing.id}"/>;<c:out value="${cashing.dinnerTable.number}"/>;<fmt:formatNumber pattern="0.00" value="${cashing.cash}"/>;<fmt:formatNumber pattern="0.00" value="${cashing.ticket}"/>;<fmt:formatNumber pattern="0.00" value="${cashing.cheque}"/>;<fmt:formatNumber pattern="0.00" value="${cashing.card}"/>;<fmt:formatNumber pattern="0.00" value="${cashing.unpaid}"/>;<fmt:formatNumber pattern="0.00" value="${cashing.dinnerTable.amountPay}"/>;</c:forEach>	
</c:if>

;;<fmt:formatNumber pattern="0.00" value="${sumCashes}"/>;<fmt:formatNumber pattern="0.00" value="${sumTickets}"/>;<fmt:formatNumber pattern="0.00" value="${sumCheques}"/>;<fmt:formatNumber pattern="0.00" value="${sumCards}"/>;<fmt:formatNumber pattern="0.00" value="${sumUnpaid}"/>;<fmt:formatNumber pattern="0.00" value="${sumAmounts}"/>;
