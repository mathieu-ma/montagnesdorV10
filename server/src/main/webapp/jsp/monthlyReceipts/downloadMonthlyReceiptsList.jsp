<%@ page language="java" contentType="application/x-csv; charset=ISO-8859-1"%><%@ taglib uri="/WEB-INF/c.tld" prefix="c" %><%@ taglib uri="/WEB-INF/fmt.tld" prefix="fmt" %><%@ taglib uri="/WEB-INF/fn.tld" prefix="fn" %><c:set var="monthSelected"><c:if test="${param.monthSelected!='-1'}"><fmt:formatNumber pattern="00" value="${param.monthSelected}"/></c:if></c:set><c:set var="yearSelected"><c:if test="${param.yearSelected!='-1'}"><c:out value="${param.yearSelected}"/></c:if></c:set><c:set var="filename" scope="page"><fmt:message key="monthlyReceiptsIFrame.jsp.file.backup"/>_<c:out value="${monthSelected}"/>_<c:out value="${yearSelected}"/></c:set><jsp:scriptlet>String filename = (String)pageContext.getAttribute("filename");response.setHeader("Content-Disposition", "attachment; filename="+filename+".csv");</jsp:scriptlet><fmt:message key="monthlyReceiptsIFrame.jsp.label.display.all"/> <fmt:formatDate pattern="MM" value="${revenueDate}" type="DATE"/> <fmt:formatDate pattern="yyyy" value="${revenueDate}" type="DATE"/>
<fmt:message key="monthlyReceiptsIFrame.jsp.label.day"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.cash"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.ticket"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.cheque"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.card"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.unpaid"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.amount"/>;<c:forEach var="vat" varStatus="status" items="${vatsList}"><fmt:message key="monthlyReceiptsIFrame.jsp.label.vat.amount"><fmt:param><fmt:formatNumber pattern="0.00" var="value" value="${vat.value}"/><c:out value="${fn:replace(value, ',', '.')}"/></fmt:param></fmt:message>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.vat.value"><fmt:param><fmt:formatNumber pattern="0.00" var="value" value="${vat.value}"/><c:out value="${fn:replace(value, '.', ',')}"/></fmt:param></fmt:message>;</c:forEach>
<c:set var="numberDays" value="0"/><c:set var="sumCashes" value="0"/><c:set var="sumTickets" value="0"/><c:set var="sumCheques" value="0"/><c:set var="sumCards" value="0"/><c:set var="sumUnpaid" value="0"/><c:set var="sumAmounts" value="0"/>
<c:if test="${not empty dayRevenuesListALL}"><c:forEach var="dayRevenue" items="${dayRevenuesListALL}" varStatus="status"><c:set var="sumCashes" value="${sumCashes+dayRevenue.cash}"/><c:set var="sumTickets" value="${sumTickets+dayRevenue.ticket}"/><c:set var="sumCheques" value="${sumCheques+dayRevenue.cheque}"/><c:set var="sumCards" value="${sumCards+dayRevenue.card}"/><c:set var="sumUnpaid" value="${sumUnpaid+dayRevenue.unpaid}"/><c:set var="sumAmounts" value="${sumAmounts+dayRevenue.amount}"/><c:set var="numberDays" value="${numberDays+1}"/><fmt:formatDate value="${dayRevenue.revenueDate}" type="DATE" pattern="dd/MM/yyyy"/>;<fmt:formatNumber pattern="0.00" var="cash" value="${dayRevenue.cash}"/><c:out value="${fn:replace(cash, '.', ',')}"/>;<fmt:formatNumber pattern="0.00" var="ticket" value="${dayRevenue.ticket}"/><c:out value="${fn:replace(ticket, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="cheque" value="${dayRevenue.cheque}"/><c:out value="${fn:replace(cheque, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="card" value="${dayRevenue.card}"/><c:out value="${fn:replace(card, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="unpaid" value="${dayRevenue.unpaid}"/><c:out value="${fn:replace(unpaid, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="amount" value="${dayRevenue.amount}"/><c:out value="${fn:replace(amount, '.', ',')}" />;<c:forEach var="vatRevenue" varStatus="status" items="${dayRevenue.vats}"><fmt:formatNumber pattern="0.00" var="vatAmount" value="${vatRevenue.amount}"/><c:out value="${fn:replace(vatAmount, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="value" value="${vatRevenue.value}"/><c:out value="${fn:replace(value, '.', ',')}"/>;</c:forEach>
</c:forEach></c:if>
<c:out value="${numberDays}"/>;<fmt:formatNumber pattern="0.00" var="sumCashes" value="${sumCashes}"/><c:out value="${fn:replace(sumCashes, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumTickets" value="${sumTickets}"/><c:out value="${fn:replace(sumTickets, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumCheques" value="${sumCheques}"/><c:out value="${fn:replace(sumCheques, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumCards" value="${sumCards}"/><c:out value="${fn:replace(sumCards, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumUnpaid" value="${sumUnpaid}"/><c:out value="${fn:replace(sumUnpaid, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumAmounts" value="${sumAmounts}"/><c:out value="${fn:replace(sumAmounts, '.', ',')}" />;<c:forEach var="vatRevenue" varStatus="status" items="${requestScope.vatRevenuesALL}"><fmt:formatNumber pattern="0.00" var="vatAmount" value="${vatRevenue.amount}"/><c:out value="${fn:replace(vatAmount, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="value" value="${vatRevenue.value}"/><c:out value="${fn:replace(value, '.', ',')}"/>;</c:forEach>



<fmt:message key="monthlyReceiptsIFrame.jsp.label.display.takeaway"/> <fmt:formatDate pattern="MM" value="${revenueDate}" type="DATE"/> <fmt:formatDate pattern="yyyy" value="${revenueDate}" type="DATE"/>
<fmt:message key="monthlyReceiptsIFrame.jsp.label.day"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.cash"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.ticket"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.cheque"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.card"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.unpaid"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.amount"/>;<c:forEach var="vat" varStatus="status" items="${vatsList}"><fmt:message key="monthlyReceiptsIFrame.jsp.label.vat.amount"><fmt:param><fmt:formatNumber pattern="0.00" var="value" value="${vat.value}"/><c:out value="${fn:replace(value, '.', ',')}"/></fmt:param></fmt:message>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.vat.value"><fmt:param><fmt:formatNumber pattern="0.00" var="value" value="${vat.value}"/><c:out value="${fn:replace(value, '.', ',')}"/></fmt:param></fmt:message>;</c:forEach>
<c:set var="numberDays" value="0"/><c:set var="sumCashes" value="0"/><c:set var="sumTickets" value="0"/><c:set var="sumCheques" value="0"/><c:set var="sumCards" value="0"/><c:set var="sumUnpaid" value="0"/><c:set var="sumAmounts" value="0"/>
<c:if test="${not empty dayRevenuesListTAKEAWAY}"><c:forEach var="dayRevenue" items="${dayRevenuesListTAKEAWAY}" varStatus="status"><c:set var="sumCashes" value="${sumCashes+dayRevenue.cash}"/><c:set var="sumTickets" value="${sumTickets+dayRevenue.ticket}"/><c:set var="sumCheques" value="${sumCheques+dayRevenue.cheque}"/><c:set var="sumCards" value="${sumCards+dayRevenue.card}"/><c:set var="sumUnpaid" value="${sumUnpaid+dayRevenue.unpaid}"/><c:set var="sumAmounts" value="${sumAmounts+dayRevenue.amount}"/><c:set var="numberDays" value="${numberDays+1}"/><fmt:formatDate value="${dayRevenue.revenueDate}" type="DATE" pattern="dd/MM/yyyy"/>;<fmt:formatNumber pattern="0.00" var="cash" value="${dayRevenue.cash}"/><c:out value="${fn:replace(cash, '.', ',')}"/>;<fmt:formatNumber pattern="0.00" var="ticket" value="${dayRevenue.ticket}"/><c:out value="${fn:replace(ticket, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="cheque" value="${dayRevenue.cheque}"/><c:out value="${fn:replace(cheque, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="card" value="${dayRevenue.card}"/><c:out value="${fn:replace(card, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="unpaid" value="${dayRevenue.unpaid}"/><c:out value="${fn:replace(unpaid, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="amount" value="${dayRevenue.amount}"/><c:out value="${fn:replace(amount, '.', ',')}" />;<c:forEach var="vatRevenue" varStatus="status" items="${dayRevenue.vats}"><fmt:formatNumber pattern="0.00" var="vatAmount" value="${vatRevenue.amount}"/><c:out value="${fn:replace(vatAmount, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="value" value="${vatRevenue.value}"/><c:out value="${fn:replace(value, '.', ',')}"/>;</c:forEach>
</c:forEach></c:if>
<c:out value="${numberDays}"/>;<fmt:formatNumber pattern="0.00" var="sumCashes" value="${sumCashes}"/><c:out value="${fn:replace(sumCashes, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumTickets" value="${sumTickets}"/><c:out value="${fn:replace(sumTickets, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumCheques" value="${sumCheques}"/><c:out value="${fn:replace(sumCheques, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumCards" value="${sumCards}"/><c:out value="${fn:replace(sumCards, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumUnpaid" value="${sumUnpaid}"/><c:out value="${fn:replace(sumUnpaid, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumAmounts" value="${sumAmounts}"/><c:out value="${fn:replace(sumAmounts, '.', ',')}" />;<c:forEach var="vatRevenue" varStatus="status" items="${requestScope.vatRevenuesTAKEAWAY}"><fmt:formatNumber pattern="0.00" var="vatAmount" value="${vatRevenue.amount}"/><c:out value="${fn:replace(vatAmount, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="value" value="${vatRevenue.value}"/><c:out value="${fn:replace(value, '.', ',')}"/>;</c:forEach>



<fmt:message key="monthlyReceiptsIFrame.jsp.label.display.inplace"/> <fmt:formatDate pattern="MM" value="${revenueDate}" type="DATE"/> <fmt:formatDate pattern="yyyy" value="${revenueDate}" type="DATE"/>
<fmt:message key="monthlyReceiptsIFrame.jsp.label.day"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.cash"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.ticket"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.cheque"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.card"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.unpaid"/>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.amount"/>;<c:forEach var="vat" varStatus="status" items="${vatsList}"><fmt:message key="monthlyReceiptsIFrame.jsp.label.vat.amount"><fmt:param><fmt:formatNumber pattern="0.00" var="value" value="${vat.value}"/><c:out value="${fn:replace(value, '.', ',')}"/></fmt:param></fmt:message>;<fmt:message key="monthlyReceiptsIFrame.jsp.label.vat.value"><fmt:param><fmt:formatNumber pattern="0.00" var="value" value="${vat.value}"/><c:out value="${fn:replace(value, '.', ',')}"/></fmt:param></fmt:message>;</c:forEach>
<c:set var="numberDays" value="0"/><c:set var="sumCashes" value="0"/><c:set var="sumTickets" value="0"/><c:set var="sumCheques" value="0"/><c:set var="sumCards" value="0"/><c:set var="sumUnpaid" value="0"/><c:set var="sumAmounts" value="0"/>
<c:if test="${not empty dayRevenuesListINPLACE}"><c:forEach var="dayRevenue" items="${dayRevenuesListINPLACE}" varStatus="status"><c:set var="sumCashes" value="${sumCashes+dayRevenue.cash}"/><c:set var="sumTickets" value="${sumTickets+dayRevenue.ticket}"/><c:set var="sumCheques" value="${sumCheques+dayRevenue.cheque}"/><c:set var="sumCards" value="${sumCards+dayRevenue.card}"/><c:set var="sumUnpaid" value="${sumUnpaid+dayRevenue.unpaid}"/><c:set var="sumAmounts" value="${sumAmounts+dayRevenue.amount}"/><c:set var="numberDays" value="${numberDays+1}"/><fmt:formatDate value="${dayRevenue.revenueDate}" type="DATE" pattern="dd/MM/yyyy"/>;<fmt:formatNumber pattern="0.00" var="cash" value="${dayRevenue.cash}"/><c:out value="${fn:replace(cash, '.', ',')}"/>;<fmt:formatNumber pattern="0.00" var="ticket" value="${dayRevenue.ticket}"/><c:out value="${fn:replace(ticket, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="cheque" value="${dayRevenue.cheque}"/><c:out value="${fn:replace(cheque, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="card" value="${dayRevenue.card}"/><c:out value="${fn:replace(card, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="unpaid" value="${dayRevenue.unpaid}"/><c:out value="${fn:replace(unpaid, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="amount" value="${dayRevenue.amount}"/><c:out value="${fn:replace(amount, '.', ',')}" />;<c:forEach var="vatRevenue" varStatus="status" items="${dayRevenue.vats}"><fmt:formatNumber pattern="0.00" var="vatAmount" value="${vatRevenue.amount}"/><c:out value="${fn:replace(vatAmount, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="value" value="${vatRevenue.value}"/><c:out value="${fn:replace(value, '.', ',')}"/>;</c:forEach>
</c:forEach></c:if>
<c:out value="${numberDays}"/>;<fmt:formatNumber pattern="0.00" var="sumCashes" value="${sumCashes}"/><c:out value="${fn:replace(sumCashes, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumTickets" value="${sumTickets}"/><c:out value="${fn:replace(sumTickets, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumCheques" value="${sumCheques}"/><c:out value="${fn:replace(sumCheques, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumCards" value="${sumCards}"/><c:out value="${fn:replace(sumCards, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumUnpaid" value="${sumUnpaid}"/><c:out value="${fn:replace(sumUnpaid, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="sumAmounts" value="${sumAmounts}"/><c:out value="${fn:replace(sumAmounts, '.', ',')}" />;<c:forEach var="vatRevenue" varStatus="status" items="${requestScope.vatRevenuesINPLACE}"><fmt:formatNumber pattern="0.00" var="vatAmount" value="${vatRevenue.amount}"/><c:out value="${fn:replace(vatAmount, '.', ',')}" />;<fmt:formatNumber pattern="0.00" var="value" value="${vatRevenue.value}"/><c:out value="${fn:replace(value, '.', ',')}"/>;</c:forEach>